<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arabic → Budhu Dharaja</title>

<style>
* { box-sizing: border-box; }

body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#1e3c72,#2a5298);
    margin: 0;
    padding: 15px;
    color: #fff;
}

.container {
    max-width: 450px;
    margin: auto;
    background: rgba(0,0,0,0.35);
    padding: 20px;
    border-radius: 12px;
}

h2 {
    text-align: center;
    font-size: 20px;
}

label {
    display: block;
    margin-top: 12px;
    font-size: 14px;
}

input, select {
    width: 100%;
    padding: 10px;
    margin-top: 6px;
    border-radius: 8px;
    border: none;
}

small {
    font-size: 12px;
    opacity: 0.85;
}

button {
    width: 100%;
    padding: 12px;
    margin-top: 18px;
    border-radius: 8px;
    border: none;
    background: #00c6ff;
    font-weight: bold;
    cursor: pointer;
}

.output {
    margin-top: 15px;
    background: rgba(255,255,255,0.15);
    padding: 12px;
    border-radius: 8px;
    font-size: 14px;
}

/* Step 2 hidden initially */
#step2 {
    display: none;
}
</style>
</head>

<body>

<div class="container">

<h2>Step 1 – Arabic & Qibthi</h2>

<label>Arabic Year</label>
<input type="number" id="year">

<label>Days</label>
<input type="number" id="days">

<button onclick="calculateArabic()">Calculate Arabic</button>

<div class="output" id="arabicResult"></div>

<!-- STEP 2 -->
<div id="step2">
    <h2>Step 2 – Budhu Dharaja</h2>

    <label>Burj</label>
    <select id="burj">
        <option value="0">Aries (Hamal)</option>
        <option value="1">Taurus</option>
        <option value="2">Gemini</option>
        <option value="3">Cancer</option>
        <option value="4">Leo</option>
        <option value="5">Virgo</option>
        <option value="6">Libra</option>
        <option value="7">Scorpio</option>
        <option value="8">Sagittarius</option>
        <option value="9">Capricorn</option>
        <option value="10">Aquarius</option>
        <option value="11">Pisces</option>
    </select>

    <label>Degree</label>
    <input type="number" id="deg">

    <label>Minute</label>
    <input type="number" id="min" placeholder="Enter minutes (0 if none)">
    <small>Minute ഇല്ലെങ്കിൽ 0 കൊടുക്കുക</small>

    <button onclick="calculateBudhu()">Calculate Budhu Dharaja</button>

    <div class="output" id="budhuResult"></div>
</div>

</div>

<script>
function calculateArabic() {

    let x = 354, c = 30, d = 11, g = 320;

    let z = +year.value;
    let f = +days.value;

    let temp = ((x * c + d) * z) / c;
    let az = Math.floor(temp);
    if (temp - az >= 0.2) az++;

    let t = az + f + g;

    let o = t * 4;
    let j = 1461;
    let AZ = Math.floor(o / j);
    let U = AZ + 337;
    let v = o % j;
    let k = Math.floor(v / 4);

    /* ⭐ FIXED QIBTHI CALCULATION ⭐ */
    let qibthiMonth = Math.floor(k / 30);
    let qibthiDays = k % 30;

    arabicResult.innerHTML = `
        <b>QIBTHI MONTH:</b> ${qibthiMonth}<br>
        <b>DAYS FROM QIBTHI:</b> ${qibthiDays}<br><hr>
        <b>ASLUL ARABIC:</b> ${t}<br>
        <b>QIBTHI YEAR:</b> ${U}<br>
        <b>QIBTHI DAYS (Total):</b> ${k}
    `;

    document.getElementById("step2").style.display = "block";
}

function calculateBudhu() {

    let burjIndex = +burj.value;
    let degVal = +deg.value;
    let minVal = min.value === "" ? 0 : +min.value;

    if (minVal < 0 || minVal > 59) {
        alert("Minute 0 മുതൽ 59 വരെ ആകണം");
        return;
    }

    let q = (burjIndex * 30) + (degVal + minVal / 60);
    let ii;

    if (q < 90) {
        ii = (degVal + minVal / 60) + (burjIndex * 30);
    } else {
        ii = 210 - (burjIndex * 30) - (degVal + minVal / 60);
    }

    let totalMin = Math.round(ii * 60);

    budhuResult.innerHTML = `
        <b>BUDHU DHARAJA:</b><br>
        ${Math.floor(totalMin / 60)}° ${totalMin % 60}'
    `;
}
</script>

</body>
</html>




